/* ===== Shared container ===== */
.container {
  position: relative;
  overflow: hidden;
  width: 100%;
  background: var(--color-grey-100);
}

/* ===== S1 - No Blur ===== */
.placeholder {
  position: absolute;
  inset: 0;
  background: var(--color-grey-200);
  transition: opacity 0.3s ease;
  z-index: 1;
}

.placeholderHidden {
  opacity: 0;
  pointer-events: none;
}

.image {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.imageLoaded {
  /* Image is loaded, placeholder fades out */
}

/* ===== S2 - Native Blur (next/image) ===== */
.nativeImage {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* ===== S3 - Custom Blur (dual layer) ===== */
.blurLayer {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: blur(20px);
  transform: scale(1.05); /* Prevent blur edges from showing */
  z-index: 2;
}

.blurLayerHidden {
  pointer-events: none;
}

.blurLayerDeblur {
  /* Used by blurToSharp: intermediate state where blur is reducing */
}

.fullLayer {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 1;
  opacity: 0;
}

.fullLayerVisible {
  opacity: 1;
}

/* ===== Transition: Instant ===== */
/* No transition at all - immediate swap */
.transition_instant.blurLayerHidden {
  opacity: 0;
}

.transition_instant.fullLayerVisible {
  opacity: 1;
}

/* ===== Transition: Fade In ===== */
/* Full image fades in on top; blur stays visible behind, then hides */
.transition_fadeIn.fullLayer {
  transition: opacity 0.8s ease;
}

.transition_fadeIn.blurLayerHidden {
  opacity: 0;
  transition: opacity 0.3s ease 0.6s; /* Delay: hide blur after full image is mostly visible */
}

/* ===== Transition: Blur to Sharp ===== */
/* Phase 1: Blur layer deblurs progressively (blur 20px -> 0px) */
/* Phase 2: After deblur, swap to full image instantly */
.transition_blurToSharp.blurLayer {
  transition: filter 0.8s ease, opacity 0.3s ease;
}

.transition_blurToSharp.blurLayerDeblur {
  filter: blur(0px);
  transform: scale(1);
}

.transition_blurToSharp.blurLayerHidden {
  filter: blur(0px);
  transform: scale(1);
  opacity: 0;
}

.transition_blurToSharp.fullLayerVisible {
  opacity: 1;
}

/* ===== Transition: Cross-fade ===== */
/* Blur fades out slowly while full image fades in faster = visible overlap */
.transition_crossFade.fullLayer {
  transition: opacity 0.5s ease;
}

.transition_crossFade.blurLayer {
  transition: filter 0.6s ease, opacity 1s ease;
}

.transition_crossFade.blurLayerHidden {
  filter: blur(10px);
  opacity: 0;
}
